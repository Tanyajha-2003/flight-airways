{"ast":null,"code":"import{useState}from'react';import axios from'axios';import{useNavigate,Link}from'react-router-dom';import{toast}from'react-hot-toast';import{FiMail,FiLock}from'react-icons/fi';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const API_BASE=process.env.REACT_APP_API_BASE;export default function Login(_ref){let{setUser}=_ref;const[email,setEmail]=useState('');const[password,setPassword]=useState('');const[loading,setLoading]=useState(false);const navigate=useNavigate();const submit=async()=>{if(!email||!password){toast.error('Please fill in all fields');return;}try{setLoading(true);const res=await axios.post(\"\".concat(API_BASE,\"/auth/login\"),{email,password});const user={id:res.data.user._id,name:res.data.user.name,email:res.data.user.email,walletBalance:res.data.user.wallet_balance};localStorage.setItem('flightUser',JSON.stringify(user));setUser(user);toast.success('Login successful ✈️');navigate('/');}catch(err){var _err$response,_err$response$data;toast.error(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.error)||'Login failed');}finally{setLoading(false);}};return/*#__PURE__*/_jsx(\"div\",{className:\"bg-airline\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-register \",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"heading\",children:\"Welcome Back \\u2708\\uFE0F\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-5\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(FiMail,{className:\"icon\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"Email\",value:email,onChange:e=>setEmail(e.target.value),className:\"input-field\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(FiLock,{className:\"icon\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"Password\",value:password,onChange:e=>setPassword(e.target.value),className:\"input-field\"})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:submit,disabled:loading,className:\"btn-primary-1 mt-6 ml-auto pr-8\",children:loading?'Logging in...':'Login'}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-center mt-4\",children:[\"No account yet? \",/*#__PURE__*/_jsx(Link,{to:\"/register\",className:\"footer-link\",children:\"Register\"})]})]})});}","map":{"version":3,"names":["useState","axios","useNavigate","Link","toast","FiMail","FiLock","jsx","_jsx","jsxs","_jsxs","API_BASE","process","env","REACT_APP_API_BASE","Login","_ref","setUser","email","setEmail","password","setPassword","loading","setLoading","navigate","submit","error","res","post","concat","user","id","data","_id","name","walletBalance","wallet_balance","localStorage","setItem","JSON","stringify","success","err","_err$response","_err$response$data","response","className","children","type","placeholder","value","onChange","e","target","onClick","disabled","to"],"sources":["/Users/tanyakumari/Desktop/flight-booking-app/frontend/src/pages/Login.jsx"],"sourcesContent":["import { useState } from 'react';\nimport axios from 'axios';\nimport { useNavigate, Link } from 'react-router-dom';\nimport { toast } from 'react-hot-toast';\nimport { FiMail, FiLock } from 'react-icons/fi';\n\nconst API_BASE = process.env.REACT_APP_API_BASE;\n\nexport default function Login({ setUser }) {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [loading, setLoading] = useState(false);\n  const navigate = useNavigate();\n\n  const submit = async () => {\n    if (!email || !password) {\n      toast.error('Please fill in all fields');\n      return;\n    }\n\n    try {\n      setLoading(true);\n      const res = await axios.post(`${API_BASE}/auth/login`, { email, password });\n\n      const user = {\n        id: res.data.user._id,\n        name: res.data.user.name,\n        email: res.data.user.email,\n        walletBalance: res.data.user.wallet_balance\n      };\n\n      localStorage.setItem('flightUser', JSON.stringify(user));\n      setUser(user);\n\n      toast.success('Login successful ✈️');\n      navigate('/');\n    } catch (err) {\n      toast.error(err.response?.data?.error || 'Login failed');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"bg-airline\">\n  <div className=\"card-register \">\n    <h1 className=\"heading\">Welcome Back ✈️</h1>\n\n    <div className=\"space-y-5\">\n      <div className=\"input-group\">\n        <FiMail className=\"icon\" />\n        <input\n          type=\"email\"\n          placeholder=\"Email\"\n          value={email}\n          onChange={e => setEmail(e.target.value)}\n          className=\"input-field\"\n        />\n      </div>\n\n      <div className=\"input-group\">\n        <FiLock className=\"icon\" />\n        <input\n          type=\"password\"\n          placeholder=\"Password\"\n          value={password}\n          onChange={e => setPassword(e.target.value)}\n          className=\"input-field\"\n        />\n      </div>\n    </div>\n\n    <button\n      onClick={submit}\n      disabled={loading}\n      className=\"btn-primary-1 mt-6 ml-auto pr-8\"\n    >\n      {loading ? 'Logging in...' : 'Login'}\n    </button>\n\n    <p className=\"text-sm text-center mt-4\">\n      No account yet? <Link to=\"/register\" className=\"footer-link\">Register</Link>\n    </p>\n  </div>\n</div>\n\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}