{"ast":null,"code":"import _objectSpread from\"/Users/tanyakumari/Desktop/flight-booking-app/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from'react';import{FiUser,FiMail,FiPhone,FiCreditCard}from'react-icons/fi';import{format}from'date-fns';import{toast}from'react-hot-toast';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const BookingForm=_ref=>{let{flight,user,onBook}=_ref;/* =========================\n     SAFETY GUARD (VERY IMPORTANT)\n     ========================= */if(!flight||!user){return/*#__PURE__*/_jsx(\"div\",{className:\"text-center mt-24 text-purple-600 text-lg\",children:\"Loading booking details...\"});}/* =========================\n     STATE\n     ========================= */const[passengerInfo,setPassengerInfo]=useState({name:user.name||'',email:user.email||'',phone:''});const[isBooking,setIsBooking]=useState(false);/* =========================\n     SAFE NUMBERS (NO STRING BUGS)\n     ========================= */const price=Number(flight.current_price);const walletBalance=Number(user.walletBalance);const hasEnoughBalance=walletBalance>=price;/* =========================\n     HANDLERS\n     ========================= */const handleChange=e=>{setPassengerInfo(_objectSpread(_objectSpread({},passengerInfo),{},{[e.target.name]:e.target.value}));};const handleSubmit=async e=>{e.preventDefault();if(!hasEnoughBalance){toast.error('Insufficient wallet balance');return;}try{setIsBooking(true);await onBook(flight.flight_id,passengerInfo);}catch(err){toast.error('Something went wrong');}finally{setIsBooking(false);}};/* =========================\n     UI\n     ========================= */return/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-4xl mx-auto fade-in\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-purple-900 mb-8 text-center\",children:\"Complete Your Booking\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-3 gap-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"lg:col-span-2\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold text-purple-900 mb-6\",children:\"Passenger Details\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block text-sm font-medium text-purple-700 mb-2\",children:[/*#__PURE__*/_jsx(FiUser,{className:\"inline mr-2\"}),\"Full Name\"]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",value:passengerInfo.name,onChange:handleChange,required:true,className:\"input-field\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block text-sm font-medium text-purple-700 mb-2\",children:[/*#__PURE__*/_jsx(FiMail,{className:\"inline mr-2\"}),\"Email\"]}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",value:passengerInfo.email,onChange:handleChange,required:true,className:\"input-field\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block text-sm font-medium text-purple-700 mb-2\",children:[/*#__PURE__*/_jsx(FiPhone,{className:\"inline mr-2\"}),\"Phone\"]}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",name:\"phone\",value:passengerInfo.phone,onChange:handleChange,required:true,className:\"input-field\"})]})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:isBooking||!hasEnoughBalance,className:\"btn-primary w-full \".concat(!hasEnoughBalance?'opacity-50 cursor-not-allowed':''),children:isBooking?/*#__PURE__*/_jsx(_Fragment,{children:\"Processing...\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(FiCreditCard,{className:\"inline mr-2\"}),\"Confirm Booking \\u2013 \\u20B9\",price]})}),!hasEnoughBalance&&/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-red-600 text-center\",children:\"Insufficient wallet balance. Please add funds.\"})]})]})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card sticky top-8\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold text-purple-900 mb-6\",children:\"Flight Summary\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3 text-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Flight\"}),/*#__PURE__*/_jsxs(\"span\",{children:[flight.airline,\" \",flight.flight_id]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Route\"}),/*#__PURE__*/_jsxs(\"span\",{children:[flight.departure_city,\" \\u2192 \",flight.arrival_city]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Departure\"}),/*#__PURE__*/_jsx(\"span\",{children:format(new Date(flight.departure_time),'MMM dd, hh:mm a')})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between font-bold pt-4 border-t\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Total\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u20B9\",price]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"wallet-balance mt-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-purple-700 font-medium mb-1\",children:\"Your Wallet Balance\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"amount text-2xl font-bold text-purple-900\",children:[\"\\u20B9\",walletBalance]})]})]})]})]});};export default BookingForm;","map":{"version":3,"names":["React","useState","FiUser","FiMail","FiPhone","FiCreditCard","format","toast","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","BookingForm","_ref","flight","user","onBook","className","children","passengerInfo","setPassengerInfo","name","email","phone","isBooking","setIsBooking","price","Number","current_price","walletBalance","hasEnoughBalance","handleChange","e","_objectSpread","target","value","handleSubmit","preventDefault","error","flight_id","err","onSubmit","type","onChange","required","disabled","concat","airline","departure_city","arrival_city","Date","departure_time"],"sources":["/Users/tanyakumari/Desktop/flight-booking-app/frontend/src/components/BookingForm.jsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { FiUser, FiMail, FiPhone, FiCreditCard } from 'react-icons/fi';\nimport { format } from 'date-fns';\nimport { toast } from 'react-hot-toast';\n\nconst BookingForm = ({ flight, user, onBook }) => {\n  /* =========================\n     SAFETY GUARD (VERY IMPORTANT)\n     ========================= */\n  if (!flight || !user) {\n    return (\n      <div className=\"text-center mt-24 text-purple-600 text-lg\">\n        Loading booking details...\n      </div>\n    );\n  }\n\n  /* =========================\n     STATE\n     ========================= */\n  const [passengerInfo, setPassengerInfo] = useState({\n    name: user.name || '',\n    email: user.email || '',\n    phone: ''\n  });\n\n  const [isBooking, setIsBooking] = useState(false);\n\n  /* =========================\n     SAFE NUMBERS (NO STRING BUGS)\n     ========================= */\n  const price = Number(flight.current_price);\n  const walletBalance = Number(user.walletBalance);\n  const hasEnoughBalance = walletBalance >= price;\n\n  /* =========================\n     HANDLERS\n     ========================= */\n  const handleChange = (e) => {\n    setPassengerInfo({\n      ...passengerInfo,\n      [e.target.name]: e.target.value\n    });\n  };\n\nconst handleSubmit = async (e) => {\n  e.preventDefault();\n\n  if (!hasEnoughBalance) {\n    toast.error('Insufficient wallet balance');\n    return;\n  }\n\n  try {\n    setIsBooking(true);\n    await onBook(flight.flight_id, passengerInfo);\n  } catch (err) {\n    toast.error('Something went wrong');\n  } finally {\n    setIsBooking(false);\n  }\n};\n\n  /* =========================\n     UI\n     ========================= */\n  return (\n    <div className=\"max-w-4xl mx-auto fade-in\">\n      <h1 className=\"text-3xl font-bold text-purple-900 mb-8 text-center\">\n        Complete Your Booking\n      </h1>\n\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\n        {/* ================= LEFT ================= */}\n        <div className=\"lg:col-span-2\">\n          <div className=\"card\">\n            <h2 className=\"text-xl font-bold text-purple-900 mb-6\">\n              Passenger Details\n            </h2>\n\n            <form onSubmit={handleSubmit} className=\"space-y-6\">\n              <div>\n                <label className=\"block text-sm font-medium text-purple-700 mb-2\">\n                  <FiUser className=\"inline mr-2\" />\n                  Full Name\n                </label>\n                <input\n                  type=\"text\"\n                  name=\"name\"\n                  value={passengerInfo.name}\n                  onChange={handleChange}\n                  required\n                  className=\"input-field\"\n                />\n              </div>\n\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                <div>\n                  <label className=\"block text-sm font-medium text-purple-700 mb-2\">\n                    <FiMail className=\"inline mr-2\" />\n                    Email\n                  </label>\n                  <input\n                    type=\"email\"\n                    name=\"email\"\n                    value={passengerInfo.email}\n                    onChange={handleChange}\n                    required\n                    className=\"input-field\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-purple-700 mb-2\">\n                    <FiPhone className=\"inline mr-2\" />\n                    Phone\n                  </label>\n                  <input\n                    type=\"tel\"\n                    name=\"phone\"\n                    value={passengerInfo.phone}\n                    onChange={handleChange}\n                    required\n                    className=\"input-field\"\n                  />\n                </div>\n              </div>\n\n              <button\n                type=\"submit\"\n                disabled={isBooking || !hasEnoughBalance}\n                className={`btn-primary w-full ${\n                  !hasEnoughBalance ? 'opacity-50 cursor-not-allowed' : ''\n                }`}\n              >\n                {isBooking ? (\n                  <>Processing...</>\n                ) : (\n                  <>\n                    <FiCreditCard className=\"inline mr-2\" />\n                    Confirm Booking – ₹{price}\n                  </>\n                )}\n              </button>\n\n              {!hasEnoughBalance && (\n                <p className=\"text-sm text-red-600 text-center\">\n                  Insufficient wallet balance. Please add funds.\n                </p>\n              )}\n            </form>\n          </div>\n        </div>\n\n        {/* ================= RIGHT ================= */}\n        <div>\n          <div className=\"card sticky top-8\">\n            <h2 className=\"text-xl font-bold text-purple-900 mb-6\">\n              Flight Summary\n            </h2>\n\n            <div className=\"space-y-3 text-sm\">\n              <div className=\"flex justify-between\">\n                <span>Flight</span>\n                <span>\n                  {flight.airline} {flight.flight_id}\n                </span>\n              </div>\n\n              <div className=\"flex justify-between\">\n                <span>Route</span>\n                <span>\n                  {flight.departure_city} → {flight.arrival_city}\n                </span>\n              </div>\n\n              <div className=\"flex justify-between\">\n                <span>Departure</span>\n                <span>\n                  {format(\n                    new Date(flight.departure_time),\n                    'MMM dd, hh:mm a'\n                  )}\n                </span>\n              </div>\n\n              <div className=\"flex justify-between font-bold pt-4 border-t\">\n                <span>Total</span>\n                <span>₹{price}</span>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"wallet-balance mt-6\">\n            <h3 className=\"text-purple-700 font-medium mb-1\">\n              Your Wallet Balance\n            </h3>\n            <div className=\"amount text-2xl font-bold text-purple-900\">\n              ₹{walletBalance}\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default BookingForm;\n\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}