{"ast":null,"code":"// import React, { useState } from 'react';\n// import { FiUser, FiMail, FiPhone, FiCreditCard } from 'react-icons/fi';\n// import { format } from 'date-fns';\n// import { toast } from 'react-hot-toast';\n\n// const BookingForm = ({ flight, user, onBook }) => {\n//   const [passengerInfo, setPassengerInfo] = useState({\n//     name: user.name,\n//     email: user.email,\n//     phone: ''\n//   });\n\n//   const [isBooking, setIsBooking] = useState(false);\n\n//   const hasEnoughBalance = user.walletBalance >= flight.current_price;\n\n//   const handleSubmit = async (e) => {\n//     console.log('SUBMIT CLICKED');\n\n//     e.preventDefault();\n\n//     if (!hasEnoughBalance) {\n//       toast.error('Insufficient wallet balance');\n//       return;\n//     }\n\n//     try {\n//       setIsBooking(true);\n\n//       const success = await onBook(flight.flight_id, passengerInfo);\n\n//       if (!success) {\n//         toast.error('Booking failed. Please try again.');\n//       }\n//     } catch (err) {\n//       console.error('Booking error:', err);\n//       toast.error('Something went wrong while booking');\n//     } finally {\n//       // ðŸ”¥ CRITICAL FIX\n//       setIsBooking(false);\n//     }\n//   };\n\n//   const handleChange = (e) => {\n//     setPassengerInfo({\n//       ...passengerInfo,\n//       [e.target.name]: e.target.value\n//     });\n//   };\n// console.log({\n//   walletBalance: user.walletBalance,\n//   walletType: typeof user.walletBalance,\n//   price: flight.current_price,\n//   priceType: typeof flight.current_price\n// });\n\n//   return (\n//     <div className=\"max-w-4xl mx-auto fade-in\">\n//       <h1 className=\"text-3xl font-bold text-purple-900 mb-8 text-center\">\n//         Complete Your Booking\n//       </h1>\n\n//       <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\n//         {/* LEFT */}\n//         <div className=\"lg:col-span-2\">\n//           <div className=\"card\">\n//             <h2 className=\"text-xl font-bold text-purple-900 mb-6\">\n//               Passenger Details\n//             </h2>\n\n//             <form onSubmit={handleSubmit} className=\"space-y-6\">\n//               <div>\n//                 <label className=\"block text-sm font-medium text-purple-700 mb-2\">\n//                   <FiUser className=\"inline mr-2\" />\n//                   Full Name\n//                 </label>\n//                 <input\n//                   type=\"text\"\n//                   name=\"name\"\n//                   value={passengerInfo.name}\n//                   onChange={handleChange}\n//                   required\n//                   className=\"input-field\"\n//                 />\n//               </div>\n\n//               <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n//                 <div>\n//                   <label className=\"block text-sm font-medium text-purple-700 mb-2\">\n//                     <FiMail className=\"inline mr-2\" />\n//                     Email\n//                   </label>\n//                   <input\n//                     type=\"email\"\n//                     name=\"email\"\n//                     value={passengerInfo.email}\n//                     onChange={handleChange}\n//                     required\n//                     className=\"input-field\"\n//                   />\n//                 </div>\n\n//                 <div>\n//                   <label className=\"block text-sm font-medium text-purple-700 mb-2\">\n//                     <FiPhone className=\"inline mr-2\" />\n//                     Phone\n//                   </label>\n//                   <input\n//                     type=\"tel\"\n//                     name=\"phone\"\n//                     value={passengerInfo.phone}\n//                     onChange={handleChange}\n//                     required\n//                     className=\"input-field\"\n//                   />\n//                 </div>\n//               </div>\n\n//               <button\n//                 type=\"submit\"\n//                 disabled={isBooking || !hasEnoughBalance}\n//                 className={`btn-primary w-full ${\n//                   !hasEnoughBalance ? 'opacity-50 cursor-not-allowed' : ''\n//                 }`}\n//               >\n//                 {isBooking ? (\n//                   <>Processing...</>\n//                 ) : (\n//                   <>\n//                     <FiCreditCard className=\"inline mr-2\" />\n//                     Confirm Booking â€“ â‚¹{flight.current_price}\n//                   </>\n//                 )}\n//               </button>\n//             </form>\n//           </div>\n//         </div>\n\n//         {/* RIGHT */}\n//         <div>\n//           <div className=\"card sticky top-8\">\n//             <h2 className=\"text-xl font-bold text-purple-900 mb-6\">\n//               Flight Summary\n//             </h2>\n\n//             <div className=\"space-y-3 text-sm\">\n//               <div className=\"flex justify-between\">\n//                 <span>Flight</span>\n//                 <span>{flight.airline} {flight.flight_id}</span>\n//               </div>\n\n//               <div className=\"flex justify-between\">\n//                 <span>Route</span>\n//                 <span>{flight.departure_city} â†’ {flight.arrival_city}</span>\n//               </div>\n\n//               <div className=\"flex justify-between\">\n//                 <span>Departure</span>\n//                 <span>{format(new Date(flight.departure_time), 'MMM dd, hh:mm a')}</span>\n//               </div>\n\n//               <div className=\"flex justify-between font-bold pt-4 border-t\">\n//                 <span>Total</span>\n//                 <span>â‚¹{flight.current_price}</span>\n//               </div>\n//             </div>\n//           </div>\n\n//           <div className=\"wallet-balance mt-6\">\n//             <h3>Your Wallet Balance</h3>\n//             <div className=\"amount\">â‚¹{user.walletBalance}</div>\n//           </div>\n//         </div>\n//       </div>\n//     </div>\n//   );\n// };\n\n// export default BookingForm;","map":{"version":3,"names":[],"sources":["/Users/tanyakumari/Desktop/flight-booking-app/frontend/src/components/BookingForm.jsx"],"sourcesContent":["// import React, { useState } from 'react';\n// import { FiUser, FiMail, FiPhone, FiCreditCard } from 'react-icons/fi';\n// import { format } from 'date-fns';\n// import { toast } from 'react-hot-toast';\n\n// const BookingForm = ({ flight, user, onBook }) => {\n//   const [passengerInfo, setPassengerInfo] = useState({\n//     name: user.name,\n//     email: user.email,\n//     phone: ''\n//   });\n\n//   const [isBooking, setIsBooking] = useState(false);\n\n//   const hasEnoughBalance = user.walletBalance >= flight.current_price;\n\n//   const handleSubmit = async (e) => {\n//     console.log('SUBMIT CLICKED');\n\n//     e.preventDefault();\n\n//     if (!hasEnoughBalance) {\n//       toast.error('Insufficient wallet balance');\n//       return;\n//     }\n\n//     try {\n//       setIsBooking(true);\n\n//       const success = await onBook(flight.flight_id, passengerInfo);\n\n//       if (!success) {\n//         toast.error('Booking failed. Please try again.');\n//       }\n//     } catch (err) {\n//       console.error('Booking error:', err);\n//       toast.error('Something went wrong while booking');\n//     } finally {\n//       // ðŸ”¥ CRITICAL FIX\n//       setIsBooking(false);\n//     }\n//   };\n\n//   const handleChange = (e) => {\n//     setPassengerInfo({\n//       ...passengerInfo,\n//       [e.target.name]: e.target.value\n//     });\n//   };\n// console.log({\n//   walletBalance: user.walletBalance,\n//   walletType: typeof user.walletBalance,\n//   price: flight.current_price,\n//   priceType: typeof flight.current_price\n// });\n\n//   return (\n//     <div className=\"max-w-4xl mx-auto fade-in\">\n//       <h1 className=\"text-3xl font-bold text-purple-900 mb-8 text-center\">\n//         Complete Your Booking\n//       </h1>\n\n//       <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\n//         {/* LEFT */}\n//         <div className=\"lg:col-span-2\">\n//           <div className=\"card\">\n//             <h2 className=\"text-xl font-bold text-purple-900 mb-6\">\n//               Passenger Details\n//             </h2>\n\n//             <form onSubmit={handleSubmit} className=\"space-y-6\">\n//               <div>\n//                 <label className=\"block text-sm font-medium text-purple-700 mb-2\">\n//                   <FiUser className=\"inline mr-2\" />\n//                   Full Name\n//                 </label>\n//                 <input\n//                   type=\"text\"\n//                   name=\"name\"\n//                   value={passengerInfo.name}\n//                   onChange={handleChange}\n//                   required\n//                   className=\"input-field\"\n//                 />\n//               </div>\n\n//               <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n//                 <div>\n//                   <label className=\"block text-sm font-medium text-purple-700 mb-2\">\n//                     <FiMail className=\"inline mr-2\" />\n//                     Email\n//                   </label>\n//                   <input\n//                     type=\"email\"\n//                     name=\"email\"\n//                     value={passengerInfo.email}\n//                     onChange={handleChange}\n//                     required\n//                     className=\"input-field\"\n//                   />\n//                 </div>\n\n//                 <div>\n//                   <label className=\"block text-sm font-medium text-purple-700 mb-2\">\n//                     <FiPhone className=\"inline mr-2\" />\n//                     Phone\n//                   </label>\n//                   <input\n//                     type=\"tel\"\n//                     name=\"phone\"\n//                     value={passengerInfo.phone}\n//                     onChange={handleChange}\n//                     required\n//                     className=\"input-field\"\n//                   />\n//                 </div>\n//               </div>\n\n//               <button\n//                 type=\"submit\"\n//                 disabled={isBooking || !hasEnoughBalance}\n//                 className={`btn-primary w-full ${\n//                   !hasEnoughBalance ? 'opacity-50 cursor-not-allowed' : ''\n//                 }`}\n//               >\n//                 {isBooking ? (\n//                   <>Processing...</>\n//                 ) : (\n//                   <>\n//                     <FiCreditCard className=\"inline mr-2\" />\n//                     Confirm Booking â€“ â‚¹{flight.current_price}\n//                   </>\n//                 )}\n//               </button>\n//             </form>\n//           </div>\n//         </div>\n\n//         {/* RIGHT */}\n//         <div>\n//           <div className=\"card sticky top-8\">\n//             <h2 className=\"text-xl font-bold text-purple-900 mb-6\">\n//               Flight Summary\n//             </h2>\n\n//             <div className=\"space-y-3 text-sm\">\n//               <div className=\"flex justify-between\">\n//                 <span>Flight</span>\n//                 <span>{flight.airline} {flight.flight_id}</span>\n//               </div>\n\n//               <div className=\"flex justify-between\">\n//                 <span>Route</span>\n//                 <span>{flight.departure_city} â†’ {flight.arrival_city}</span>\n//               </div>\n\n//               <div className=\"flex justify-between\">\n//                 <span>Departure</span>\n//                 <span>{format(new Date(flight.departure_time), 'MMM dd, hh:mm a')}</span>\n//               </div>\n\n//               <div className=\"flex justify-between font-bold pt-4 border-t\">\n//                 <span>Total</span>\n//                 <span>â‚¹{flight.current_price}</span>\n//               </div>\n//             </div>\n//           </div>\n\n//           <div className=\"wallet-balance mt-6\">\n//             <h3>Your Wallet Balance</h3>\n//             <div className=\"amount\">â‚¹{user.walletBalance}</div>\n//           </div>\n//         </div>\n//       </div>\n//     </div>\n//   );\n// };\n\n// export default BookingForm;\n"],"mappings":"AAAA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}