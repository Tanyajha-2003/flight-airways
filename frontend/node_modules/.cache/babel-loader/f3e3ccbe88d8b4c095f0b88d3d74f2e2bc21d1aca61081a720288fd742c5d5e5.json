{"ast":null,"code":"import _objectSpread from\"/Users/tanyakumari/Desktop/flight-booking-app/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{FiClock,FiMapPin,FiTrendingUp,FiCalendar}from'react-icons/fi';import{useNavigate}from'react-router-dom';import{format}from'date-fns';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const FlightList=_ref=>{let{flights,onSelectFlight,onBookingAttempt}=_ref;const navigate=useNavigate();const[attemptTimers,setAttemptTimers]=useState({});const handleViewDetails=async flight=>{const result=await onBookingAttempt(flight.flight_id);if(result!==null&&result!==void 0&&result.surge_reset_time){setAttemptTimers(prev=>_objectSpread(_objectSpread({},prev),{},{[flight.flight_id]:result.surge_reset_time}));}onSelectFlight(flight);navigate('/book');};const getTimeRemaining=resetTime=>{if(!resetTime)return null;const diff=new Date(resetTime)-new Date();if(diff<=0)return null;const minutes=Math.floor(diff/60000);const seconds=Math.floor(diff%60000/1000);return\"\".concat(minutes,\":\").concat(seconds.toString().padStart(2,'0'));};useEffect(()=>{const interval=setInterval(()=>{setAttemptTimers(prev=>{const updated=_objectSpread({},prev);Object.keys(updated).forEach(id=>{if(!getTimeRemaining(updated[id])){delete updated[id];}});return updated;});},1000);return()=>clearInterval(interval);},[]);return/*#__PURE__*/_jsx(\"div\",{className:\"space-y-6\",children:flights.map(flight=>{const isSurge=flight.surge_multiplier>1;const timeRemaining=getTimeRemaining(attemptTimers[flight.flight_id]);return/*#__PURE__*/_jsxs(\"div\",{className:\"flight-card-upgraded\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flight-left\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flight-header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flight-title\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"airline-name\",children:flight.airline}),/*#__PURE__*/_jsx(\"span\",{className:\"flight-id\",children:flight.flight_id})]}),isSurge&&/*#__PURE__*/_jsxs(\"span\",{className:\"surge-badge\",children:[/*#__PURE__*/_jsx(FiTrendingUp,{}),\" Surge Active\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flight-route\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"city\",children:[/*#__PURE__*/_jsx(FiMapPin,{}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"label\",children:\"From\"}),/*#__PURE__*/_jsx(\"strong\",{children:flight.departure_city})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"route-line\",children:[/*#__PURE__*/_jsx(\"span\",{}),/*#__PURE__*/_jsx(FiClock,{}),/*#__PURE__*/_jsx(\"span\",{})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"city\",children:[/*#__PURE__*/_jsx(FiMapPin,{}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"label\",children:\"To\"}),/*#__PURE__*/_jsx(\"strong\",{children:flight.arrival_city})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flight-meta\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(FiCalendar,{}),format(new Date(flight.departure_time),'MMM dd, hh:mm a')]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(FiClock,{}),Math.round((new Date(flight.arrival_time)-new Date(flight.departure_time))/(1000*60*60)),\"h\"]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:flight.available_seats}),\" seats available\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flight-right\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"price-box\",children:[isSurge&&/*#__PURE__*/_jsxs(\"span\",{className:\"old-price\",children:[\"\\u20B9\",flight.base_price]}),/*#__PURE__*/_jsxs(\"span\",{className:\"price \".concat(isSurge?'surge':''),children:[\"\\u20B9\",flight.current_price]}),isSurge&&/*#__PURE__*/_jsxs(\"span\",{className:\"surge-text\",children:[\"+\",((flight.surge_multiplier-1)*100).toFixed(0),\"%\"]})]}),timeRemaining&&/*#__PURE__*/_jsxs(\"div\",{className:\"countdown\",children:[/*#__PURE__*/_jsx(FiClock,{}),\" Resets in \",timeRemaining]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleViewDetails(flight),className:\"book-btn\",children:\"Book Now\"})]})]},flight.flight_id);})});};export default FlightList;","map":{"version":3,"names":["React","useState","useEffect","FiClock","FiMapPin","FiTrendingUp","FiCalendar","useNavigate","format","jsx","_jsx","jsxs","_jsxs","FlightList","_ref","flights","onSelectFlight","onBookingAttempt","navigate","attemptTimers","setAttemptTimers","handleViewDetails","flight","result","flight_id","surge_reset_time","prev","_objectSpread","getTimeRemaining","resetTime","diff","Date","minutes","Math","floor","seconds","concat","toString","padStart","interval","setInterval","updated","Object","keys","forEach","id","clearInterval","className","children","map","isSurge","surge_multiplier","timeRemaining","airline","departure_city","arrival_city","departure_time","round","arrival_time","available_seats","base_price","current_price","toFixed","onClick"],"sources":["/Users/tanyakumari/Desktop/flight-booking-app/frontend/src/components/FlightList.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { FiClock, FiMapPin, FiTrendingUp, FiCalendar } from 'react-icons/fi';\nimport { useNavigate } from 'react-router-dom';\nimport { format } from 'date-fns';\n\nconst FlightList = ({ flights, onSelectFlight, onBookingAttempt }) => {\n  const navigate = useNavigate();\n  const [attemptTimers, setAttemptTimers] = useState({});\n\n  const handleViewDetails = async (flight) => {\n    const result = await onBookingAttempt(flight.flight_id);\n\n    if (result?.surge_reset_time) {\n      setAttemptTimers(prev => ({\n        ...prev,\n        [flight.flight_id]: result.surge_reset_time\n      }));\n    }\n\n    onSelectFlight(flight);\n    navigate('/book');\n  };\n\n  const getTimeRemaining = (resetTime) => {\n    if (!resetTime) return null;\n\n    const diff = new Date(resetTime) - new Date();\n    if (diff <= 0) return null;\n\n    const minutes = Math.floor(diff / 60000);\n    const seconds = Math.floor((diff % 60000) / 1000);\n    return `${minutes}:${seconds.toString().padStart(2, '0')}`;\n  };\n\n  useEffect(() => {\n    const interval = setInterval(() => {\n      setAttemptTimers(prev => {\n        const updated = { ...prev };\n        Object.keys(updated).forEach(id => {\n          if (!getTimeRemaining(updated[id])) {\n            delete updated[id];\n          }\n        });\n        return updated;\n      });\n    }, 1000);\n\n    return () => clearInterval(interval);\n  }, []);\n\n  return (\n    <div className=\"space-y-6\">\n      {flights.map((flight) => {\n        const isSurge = flight.surge_multiplier > 1;\n        const timeRemaining = getTimeRemaining(attemptTimers[flight.flight_id]);\n\n        return (\n          <div key={flight.flight_id} className=\"flight-card-upgraded\">\n            {/* LEFT */}\n            <div className=\"flight-left\">\n              <div className=\"flight-header\">\n                <div className=\"flight-title\">\n                  <span className=\"airline-name\">{flight.airline}</span>\n                  <span className=\"flight-id\">{flight.flight_id}</span>\n                </div>\n\n                {isSurge && (\n                  <span className=\"surge-badge\">\n                    <FiTrendingUp /> Surge Active\n                  </span>\n                )}\n              </div>\n\n              <div className=\"flight-route\">\n                <div className=\"city\">\n                  <FiMapPin />\n                  <div>\n                    <span className=\"label\">From</span>\n                    <strong>{flight.departure_city}</strong>\n                  </div>\n                </div>\n\n                <div className=\"route-line\">\n                  <span />\n                  <FiClock />\n                  <span />\n                </div>\n\n                <div className=\"city\">\n                  <FiMapPin />\n                  <div>\n                    <span className=\"label\">To</span>\n                    <strong>{flight.arrival_city}</strong>\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"flight-meta\">\n                <div>\n                  <FiCalendar />\n                  {format(new Date(flight.departure_time), 'MMM dd, hh:mm a')}\n                </div>\n\n                <div>\n                  <FiClock />\n                  {Math.round(\n                    (new Date(flight.arrival_time) -\n                      new Date(flight.departure_time)) /\n                      (1000 * 60 * 60)\n                  )}h\n                </div>\n\n                <div>\n                  <strong>{flight.available_seats}</strong> seats available\n                </div>\n              </div>\n            </div>\n\n            {/* RIGHT */}\n            <div className=\"flight-right\">\n              <div className=\"price-box\">\n                {isSurge && (\n                  <span className=\"old-price\">₹{flight.base_price}</span>\n                )}\n                <span className={`price ${isSurge ? 'surge' : ''}`}>\n                  ₹{flight.current_price}\n                </span>\n                {isSurge && (\n                  <span className=\"surge-text\">\n                    +{((flight.surge_multiplier - 1) * 100).toFixed(0)}%\n                  </span>\n                )}\n              </div>\n\n              {timeRemaining && (\n                <div className=\"countdown\">\n                  <FiClock /> Resets in {timeRemaining}\n                </div>\n              )}\n\n              <button\n                onClick={() => handleViewDetails(flight)}\n                className=\"book-btn\"\n              >\n                Book Now\n              </button>\n            </div>\n          </div>\n        );\n      })}\n    </div>\n  );\n};\n\nexport default FlightList;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}